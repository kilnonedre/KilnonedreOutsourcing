import{C as U}from"./CommonHeader.a228caf3.js";import{b as S,a as O}from"./api.22883e35.js";import{_ as I,C as f,r as h,k as j,o as c,c as N,d as i,b as d,w as u,i as b,f as v,l as T,m as A,F as w,h as k,t as B,p as W,q as X}from"./index.22501be6.js";import{t as q}from"./table2excel.fee53b5f.js";const C="station,gridName,businessName,faulttypename,executeStaffName,",y={\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9:"station",\u7F51\u683C:"gridName",\u5B89\u88C5\u7C7B\u578B:"businessName",\u7EF4\u4FEE\u7C7B\u578B:"businessName",\u6545\u969C\u79CD\u7C7B:"faulttypename",\u65BD\u5DE5\u5458:"executeStaffName"},r={createDate:{label:"\u5DE5\u5355\u751F\u4EA7\u65E5\u671F",width:"160",sort:!0},dateWeek:{label:"\u5DE5\u5355\u751F\u4EA7\u5468",width:"160",sort:!0},dateMonth:{label:"\u5DE5\u5355\u751F\u4EA7\u6708\u4EFD",width:"160",sort:!0},station:{label:"\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9",width:"180",sort:!0},gridName:{label:"\u7F51\u683C\u540D\u79F0",width:"180",sort:!0},businessName:{label:"\u5B89\u88C5\u7C7B\u578B",width:"180",sort:!0},executeStaffName:{label:"\u65BD\u5DE5\u5458",width:"160",sort:!0},nbrCount:{label:"\u5DE5\u5355\u6570",width:"160",sort:!0},completeNbrCount:{label:"\u5B8C\u6210\u5DE5\u5355\u6570",width:"160",sort:!0},orderDoneRate:{label:"\u5DE5\u5355\u5B8C\u6210\u7387",width:"200",sort:!1},compleTimeSum:{label:"\u5DE5\u5355\u5B8C\u6210\u5E73\u5747\u65F6\u957F(\u5206\u949F)",width:"250",sort:!0},overtimeNbrCount:{label:"48\u5C0F\u65F6\u8D85\u65F6\u5DF2\u5B8C\u6210\u5DE5\u5355\u6570",width:"250",sort:!0},overtimeNbrUncomple:{label:"48\u5C0F\u65F6\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570",width:"250",sort:!0},rank2Cust:{label:"\u4E8C\u6B21\u62A5\u4FEE\u5DE5\u5355\u6570",width:"200",sort:!0},rank2CustRate:{label:"\u4E8C\u6B21\u62A5\u4FEE\u7387",width:"200",sort:!1},rank3Cust:{label:"\u4E09\u6B21\u53CA\u4EE5\u4E0A\u62A5\u4FEE\u5DE5\u5355\u6570",width:"300",sort:!0},booktimeUnuse:{label:"\u5B8C\u6210\u65F6\u95F4\u5C0F\u4E8E\u9884\u7EA6\u65F6\u95F4\u5DE5\u5355\u6570",width:"300",sort:!0},recallSuccess:{label:"\u56DE\u8BBF\u6210\u529F\u5355\u6570",width:"200",sort:!0},recallSuccessRate:{label:"\u56DE\u8BBF\u6210\u529F\u7387",width:"200",sort:!1},recallGood:{label:"\u56DE\u8BBF\u6EE1\u610F\u5355\u6570",width:"200",sort:!0},recallGoodRate:{label:"\u56DE\u8BBF\u6EE1\u610F\u7387",width:"200",sort:!1},recallOrdinary:{label:"\u56DE\u8BBF\u4E00\u822C\u5355\u6570",width:"200",sort:!0},recallBad:{label:"\u56DE\u8BBF\u4E0D\u6EE1\u610F\u5355\u6570",width:"200",sort:!0},faulttypename:{label:"\u6545\u969C\u79CD\u7C7B",width:"180",sort:!0}},J={components:{CommonHeader:U},data(){return{activeName:"\u5B89\u88C5\u5DE5\u5355",tabDisable:!1,loading:!0,downLoading:!1,checkPeriod:"\u6309\u65E5\u7EDF\u8BA1",checkGroup:["\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9"],group:"station,createDate",date:"",week1:"",week2:"",week1forShow:"",week2forShow:"",month:"",businessName:[],typeList:[],typeListforInstaller:[],typeListforRepairer:[],executeStaffName:"",staffList:[],staffListforInstaller:[],staffListforRepairer:[],station:"",stationOptions:["\u5F00\u53D1\u533A\u5E7F\u7535\u4E2D\u5FC3","\u6C7E\u6E56\u5E7F\u7535\u4E2D\u5FC3","\u9AD8\u65B0\u533A\u5E7F\u7535\u4E2D\u5FC3","\u5434\u6C5F\u4E1C\u592A\u6E56\u4E2D\u5FC3","\u4E03\u90FD\u5E7F\u7535\u7AD9","\u6843\u6E90\u5E7F\u7535\u7AD9","\u9707\u6CFD\u5E7F\u7535\u7AD9","\u5E73\u671B\u5E7F\u7535\u7AD9","\u6A2A\u6247\u5E7F\u7535\u7AD9"],total:0,pageSize:20,currentPage:1,tableHeader:{},tableData:[],ascs:"",descs:""}},watch:{week1forShow(t){!t||!this.week2forShow?this.week1="":t>this.week2forShow?(this.week1forShow=this.week2forShow,this.week1=this.getWeek(this.week1forShow)):this.week1=this.getWeek(t)}},methods:{getTableList(t,a){this.loading=!0,this.tabDisable=!0,this.tableData=[],this.tableHeader={},t=="\u5B89\u88C5\u5DE5\u5355"?a=="\u6309\u65E5\u7EDF\u8BA1"?S.getDailyInstalledGroup({size:this.pageSize,current:this.currentPage,date1:f(this.date)?this.date[0]:"",date2:f(this.date)?this.date[1]:"",businessNameSet:this.businessName.join(),executeStaffName:this.executeStaffName,station:this.station,groupBy:this.group,descs:this.descs,ascs:this.ascs}).then(l=>{l.records.length!=0&&(Object.keys(l.records[0]).forEach(e=>{this.group.indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),C.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableHeader.executeStaffName!=null&&(this.tableHeader.executeStaffName.label="\u5B89\u88C5\u5458"),this.tableHeader.businessName!=null&&(this.tableHeader.businessName.label="\u5B89\u88C5\u7C7B\u578B"),this.tableHeader.overtimeNbrCount!=null&&(this.tableHeader.overtimeNbrCount.label="48\u5C0F\u65F6\u8D85\u65F6\u5DF2\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.overtimeNbrUncomple!=null&&(this.tableHeader.overtimeNbrUncomple.label="48\u5C0F\u65F6\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.orderDoneRate=r.orderDoneRate,this.tableHeader.recallSuccessRate=r.recallSuccessRate,this.tableHeader.recallGoodRate=r.recallGoodRate,delete this.tableHeader.businessNameSet),this.tableData=l.records,this.tableData.forEach(e=>{e.createDate!=null&&(e.createDate=e.createDate.substr(0,10)),e.compleTimeSum!=null&&(e.completeNbrCount==0?e.compleTimeSum="/":e.compleTimeSum=(e.compleTimeSum/e.completeNbrCount).toFixed(2)),e.nbrCount==0?e.orderDoneRate="/":e.orderDoneRate=(e.completeNbrCount/e.nbrCount).toFixed(2),e.completeNbrCount==0?e.recallSuccessRate="/":e.recallSuccessRate=(e.recallSuccess/e.completeNbrCount).toFixed(2),e.recallSuccess==0?e.recallGoodRate="/":e.recallGoodRate=(e.recallGood/e.recallSuccess).toFixed(2)}),this.total=l.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):a=="\u6309\u5468\u7EDF\u8BA1"?S.getWeekInstalledGroup({size:this.pageSize,current:this.currentPage,week1:this.week1,week2:this.week2,businessNameSet:this.businessName.join(),executeStaffName:this.executeStaffName,station:this.station,groupBy:this.group,descs:this.descs,ascs:this.ascs}).then(l=>{l.records.length!=0&&(Object.keys(l.records[0]).forEach(e=>{this.group.indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),C.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableHeader.executeStaffName!=null&&(this.tableHeader.executeStaffName.label="\u5B89\u88C5\u5458"),this.tableHeader.businessName!=null&&(this.tableHeader.businessName.label="\u5B89\u88C5\u7C7B\u578B"),this.tableHeader.overtimeNbrCount!=null&&(this.tableHeader.overtimeNbrCount.label="48\u5C0F\u65F6\u8D85\u65F6\u5DF2\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.overtimeNbrUncomple!=null&&(this.tableHeader.overtimeNbrUncomple.label="48\u5C0F\u65F6\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.orderDoneRate=r.orderDoneRate,this.tableHeader.recallSuccessRate=r.recallSuccessRate,this.tableHeader.recallGoodRate=r.recallGoodRate,delete this.tableHeader.businessNameSet),this.tableData=l.records,this.tableData.forEach(e=>{e.createDate!=null&&(e.createDate=e.createDate.substr(0,10)),e.compleTimeSum!=null&&(e.completeNbrCount==0?e.compleTimeSum="/":e.compleTimeSum=(e.compleTimeSum/e.completeNbrCount).toFixed(2)),e.nbrCount==0?e.orderDoneRate="/":e.orderDoneRate=(e.completeNbrCount/e.nbrCount).toFixed(2),e.completeNbrCount==0?e.recallSuccessRate="/":e.recallSuccessRate=(e.recallSuccess/e.completeNbrCount).toFixed(2),e.recallSuccess==0?e.recallGoodRate="/":e.recallGoodRate=(e.recallGood/e.recallSuccess).toFixed(2)}),this.total=l.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):a=="\u6309\u6708\u7EDF\u8BA1"&&S.getMonthInstalledGroup({size:this.pageSize,current:this.currentPage,month1:f(this.month)?this.month[0]:"",month2:f(this.month)?this.month[1]:"",businessNameSet:this.businessName.join(),executeStaffName:this.executeStaffName,station:this.station,groupBy:this.group,descs:this.descs,ascs:this.ascs}).then(l=>{l.records.length!=0&&(Object.keys(l.records[0]).forEach(e=>{this.group.indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),C.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableHeader.executeStaffName!=null&&(this.tableHeader.executeStaffName.label="\u5B89\u88C5\u5458"),this.tableHeader.businessName!=null&&(this.tableHeader.businessName.label="\u5B89\u88C5\u7C7B\u578B"),this.tableHeader.overtimeNbrCount!=null&&(this.tableHeader.overtimeNbrCount.label="48\u5C0F\u65F6\u8D85\u65F6\u5DF2\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.overtimeNbrUncomple!=null&&(this.tableHeader.overtimeNbrUncomple.label="48\u5C0F\u65F6\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.orderDoneRate=r.orderDoneRate,this.tableHeader.recallSuccessRate=r.recallSuccessRate,this.tableHeader.recallGoodRate=r.recallGoodRate,delete this.tableHeader.businessNameSet),this.tableData=l.records,this.tableData.forEach(e=>{e.createDate!=null&&(e.createDate=e.createDate.substr(0,10)),e.compleTimeSum!=null&&(e.completeNbrCount==0?e.compleTimeSum="/":e.compleTimeSum=(e.compleTimeSum/e.completeNbrCount).toFixed(2)),e.nbrCount==0?e.orderDoneRate="/":e.orderDoneRate=(e.completeNbrCount/e.nbrCount).toFixed(2),e.completeNbrCount==0?e.recallSuccessRate="/":e.recallSuccessRate=(e.recallSuccess/e.completeNbrCount).toFixed(2),e.recallSuccess==0?e.recallGoodRate="/":e.recallGoodRate=(e.recallGood/e.recallSuccess).toFixed(2)}),this.total=l.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):t=="\u7EF4\u4FEE\u5DE5\u5355"&&(a=="\u6309\u65E5\u7EDF\u8BA1"?S.getDailyRepairedGroup({size:this.pageSize,current:this.currentPage,date1:f(this.date)?this.date[0]:"",date2:f(this.date)?this.date[1]:"",businessNameSet:this.businessName.join(),executeStaffName:this.executeStaffName,station:this.station,groupBy:this.group,descs:this.descs,ascs:this.ascs}).then(l=>{l.records.length!=0&&(Object.keys(l.records[0]).forEach(e=>{this.group.indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),C.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableHeader.executeStaffName!=null&&(this.tableHeader.executeStaffName.label="\u7EF4\u4FEE\u5458"),this.tableHeader.businessName!=null&&(this.tableHeader.businessName.label="\u7EF4\u4FEE\u7C7B\u578B"),this.tableHeader.overtimeNbrCount!=null&&(this.tableHeader.overtimeNbrCount.label="24\u5C0F\u65F6\u8D85\u65F6\u5DF2\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.overtimeNbrUncomple!=null&&(this.tableHeader.overtimeNbrUncomple.label="24\u5C0F\u65F6\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.orderDoneRate=r.orderDoneRate,this.tableHeader.recallSuccessRate=r.recallSuccessRate,this.tableHeader.recallGoodRate=r.recallGoodRate,this.tableHeader.rank2CustRate=r.rank2CustRate,delete this.tableHeader.businessNameSet),this.tableData=l.records,this.tableData.forEach(e=>{e.createDate!=null&&(e.createDate=e.createDate.substr(0,10)),e.compleTimeSum!=null&&(e.completeNbrCount==0?e.compleTimeSum="/":e.compleTimeSum=(e.compleTimeSum/e.completeNbrCount).toFixed(2)),e.nbrCount==0?e.orderDoneRate="/":e.orderDoneRate=(e.completeNbrCount/e.nbrCount).toFixed(2),e.completeNbrCount==0?e.recallSuccessRate="/":e.recallSuccessRate=(e.recallSuccess/e.completeNbrCount).toFixed(2),e.recallSuccess==0?e.recallGoodRate="/":e.recallGoodRate=(e.recallGood/e.recallSuccess).toFixed(2),e.nbrCount==0?e.rank2CustRate="/":e.rank2CustRate=(e.rank2Cust/e.nbrCount).toFixed(2)}),this.total=l.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):a=="\u6309\u5468\u7EDF\u8BA1"?S.getWeekRepairedGroup({size:this.pageSize,current:this.currentPage,week1:this.week1,week2:this.week2,businessNameSet:this.businessName.join(),executeStaffName:this.executeStaffName,station:this.station,groupBy:this.group,descs:this.descs,ascs:this.ascs}).then(l=>{l.records.length!=0&&(Object.keys(l.records[0]).forEach(e=>{this.group.indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),C.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableHeader.executeStaffName!=null&&(this.tableHeader.executeStaffName.label="\u7EF4\u4FEE\u5458"),this.tableHeader.businessName!=null&&(this.tableHeader.businessName.label="\u7EF4\u4FEE\u7C7B\u578B"),this.tableHeader.overtimeNbrCount!=null&&(this.tableHeader.overtimeNbrCount.label="24\u5C0F\u65F6\u8D85\u65F6\u5DF2\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.overtimeNbrUncomple!=null&&(this.tableHeader.overtimeNbrUncomple.label="24\u5C0F\u65F6\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.orderDoneRate=r.orderDoneRate,this.tableHeader.recallSuccessRate=r.recallSuccessRate,this.tableHeader.recallGoodRate=r.recallGoodRate,this.tableHeader.rank2CustRate=r.rank2CustRate,delete this.tableHeader.businessNameSet),this.tableData=l.records,this.tableData.forEach(e=>{e.createDate!=null&&(e.createDate=e.createDate.substr(0,10)),e.compleTimeSum!=null&&(e.completeNbrCount==0?e.compleTimeSum="/":e.compleTimeSum=(e.compleTimeSum/e.completeNbrCount).toFixed(2)),e.nbrCount==0?e.orderDoneRate="/":e.orderDoneRate=(e.completeNbrCount/e.nbrCount).toFixed(2),e.completeNbrCount==0?e.recallSuccessRate="/":e.recallSuccessRate=(e.recallSuccess/e.completeNbrCount).toFixed(2),e.recallSuccess==0?e.recallGoodRate="/":e.recallGoodRate=(e.recallGood/e.recallSuccess).toFixed(2),e.nbrCount==0?e.rank2CustRate="/":e.rank2CustRate=(e.rank2Cust/e.nbrCount).toFixed(2)}),this.total=l.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):a=="\u6309\u6708\u7EDF\u8BA1"&&S.getMonthRepairedGroup({size:this.pageSize,current:this.currentPage,month1:f(this.month)?this.month[0]:"",month2:f(this.month)?this.month[1]:"",businessNameSet:this.businessName.join(),executeStaffName:this.executeStaffName,station:this.station,groupBy:this.group,descs:this.descs,ascs:this.ascs}).then(l=>{l.records.length!=0&&(Object.keys(l.records[0]).forEach(e=>{this.group.indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),C.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableHeader.executeStaffName!=null&&(this.tableHeader.executeStaffName.label="\u7EF4\u4FEE\u5458"),this.tableHeader.businessName!=null&&(this.tableHeader.businessName.label="\u7EF4\u4FEE\u7C7B\u578B"),this.tableHeader.overtimeNbrCount!=null&&(this.tableHeader.overtimeNbrCount.label="24\u5C0F\u65F6\u8D85\u65F6\u5DF2\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.overtimeNbrUncomple!=null&&(this.tableHeader.overtimeNbrUncomple.label="24\u5C0F\u65F6\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570"),this.tableHeader.orderDoneRate=r.orderDoneRate,this.tableHeader.recallSuccessRate=r.recallSuccessRate,this.tableHeader.recallGoodRate=r.recallGoodRate,this.tableHeader.rank2CustRate=r.rank2CustRate,delete this.tableHeader.businessNameSet),this.tableData=l.records,this.tableData.forEach(e=>{e.createDate!=null&&(e.createDate=e.createDate.substr(0,10)),e.compleTimeSum!=null&&(e.completeNbrCount==0?e.compleTimeSum="/":e.compleTimeSum=(e.compleTimeSum/e.completeNbrCount).toFixed(2)),e.nbrCount==0?e.orderDoneRate="/":e.orderDoneRate=(e.completeNbrCount/e.nbrCount).toFixed(2),e.completeNbrCount==0?e.recallSuccessRate="/":e.recallSuccessRate=(e.recallSuccess/e.completeNbrCount).toFixed(2),e.recallSuccess==0?e.recallGoodRate="/":e.recallGoodRate=(e.recallGood/e.recallSuccess).toFixed(2),e.nbrCount==0?e.rank2CustRate="/":e.rank2CustRate=(e.rank2Cust/e.nbrCount).toFixed(2)}),this.total=l.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}))},initList(){O.getParamList({params:"yhxw_order_anzhuang_statistic_month-business_name,yhxw_order_anzhuang_statistic_month-EXECUTE_STAFF_NAME,yhxw_order_weixiu_statistic_month-business_name,yhxw_order_weixiu_statistic_month-EXECUTE_STAFF_NAME"}).then(t=>{this.typeListforInstaller=t["yhxw_order_anzhuang_statistic_month-business_name"],this.typeList=this.typeListforInstaller,this.staffListforInstaller=t["yhxw_order_anzhuang_statistic_month-EXECUTE_STAFF_NAME"],this.staffList=this.staffListforInstaller,this.typeListforRepairer=t["yhxw_order_weixiu_statistic_month-business_name"],this.staffListforRepairer=t["yhxw_order_weixiu_statistic_month-EXECUTE_STAFF_NAME"]})},handleClick(t){this.activeName=t.props.label,this.businessName=[],this.ascs="",this.descs="",this.checkPeriod="\u6309\u65E5\u7EDF\u8BA1",this.checkGroup=["\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9"],this.group="station,createDate",this.activeName=="\u5B89\u88C5\u5DE5\u5355"?(this.staffList=this.staffListforInstaller,this.typeList=this.typeListforInstaller):(this.staffList=this.staffListforRepairer,this.typeList=this.typeListforRepairer),this.getTableList(this.activeName,this.checkPeriod)},handleCheckedPeriodChange(t){t=="\u6309\u65E5\u7EDF\u8BA1"?(this.checkGroup=["\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9"],this.group="station,createDate"):t=="\u6309\u5468\u7EDF\u8BA1"?(this.checkGroup=["\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9"],this.group="station,dateWeek"):t=="\u6309\u6708\u7EDF\u8BA1"&&(this.checkGroup=["\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9"],this.group="station,dateMonth"),this.getTableList(this.activeName,t)},handleCheckedGroupChange(t){this.checkPeriod=="\u6309\u65E5\u7EDF\u8BA1"?this.group="createDate,":this.checkPeriod=="\u6309\u5468\u7EDF\u8BA1"?this.group="dateWeek,":this.checkPeriod=="\u6309\u6708\u7EDF\u8BA1"&&(this.group="dateMonth,");for(let a=0;a<t.length;a++)a==t.length-1?this.group+=y[t[a]]:this.group+=y[t[a]]+",";this.getTableList(this.activeName,this.checkPeriod)},changeTime(){this.getTableList(this.activeName,this.checkPeriod)},changeWeekTime(t){!t||!this.week1forShow?this.week2="":t<this.week1forShow?(this.week2forShow=this.week1forShow,this.week2=this.getWeek(this.week2forShow)):this.week2=this.getWeek(t),this.getTableList(this.activeName,this.checkPeriod)},getDay(t,a){var l=new Date,e=l.getTime(),s=24*3600*1e3*t;l.setTime(parseInt(e+s));var n=l.getFullYear(),m=(l.getMonth()+1).toString();m.length<=1&&(m="0"+m);var p=l.getDate().toString();return p.length<=1&&(p="0"+p),n+a+m+a+p},getLastMonday(){let t=new Date,a=t.getTime(),l=t.getDay(),e=24*3600*1e3,s=a-(l-1+7)*e;return new Date(s)},getWeek(t){const a=new Date(t.getFullYear().toString(),0,1),l=t-a,e=Math.ceil(l/864e5);return t.getFullYear()+"/"+Math.ceil(e/7)},getMonth(){let t=new Date,a=t.getMonth();a=a-1,a>11?(t.setFullYear(t.getFullYear()+1),t.setMonth(0)):a<0?(t.setFullYear(t.getFullYear()-1),t.setMonth(11)):t.setMonth(a);let l=t.getFullYear(),e=(t.getMonth()+1).toString();return e.length<=1&&(e="0"+e),l+"/"+e},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.getTableList(this.activeName,this.checkPeriod)},handleCurrentChange(t){this.currentPage=t,this.getTableList(this.activeName,this.checkPeriod)},sortTable({prop:t,order:a}){a=="ascending"?(this.ascs=t,this.descs=""):a=="descending"?(this.ascs="",this.descs=t):(this.ascs="",this.descs=""),this.getTableList(this.activeName,this.checkPeriod)},onExport(){let t=this.date?this.date:"\u5168\u90E8\u65E5\u671F",a=this.tableData;this.downLoading=!0;let l=[],e;for(let n in this.tableHeader)e={title:this.tableHeader[n].label,key:n,type:"text"},l.push(e);const s=`${t}-${this.activeName}`;q(l,a,s),this.downLoading=falsecontent}},created(){this.date=[this.getDay(-1,"/"),this.getDay(-1,"/")],this.week1forShow=this.week2forShow=this.getLastMonday(),this.week1=this.week2=this.getWeek(this.week1forShow),this.month=[this.getMonth(),this.getMonth()],this.initList(),this.getTableList(this.activeName,this.checkPeriod)}},K=t=>(W("data-v-cc9e3de6"),t=t(),X(),t),Q={class:"page order"},Z={class:"content"},$={class:"tab-content"},ee={class:"group"},te={class:"toolbox"},ae={class:"left"},se={class:"date-pick"},le={key:1},oe={class:"right"},re={class:"table"},ie=K(()=>d("div",{style:{"margin-top":"5%"}},"\u6682\u65E0\u6570\u636E",-1)),ne={class:"pagination"};function ce(t,a,l,e,s,n){const m=h("common-header"),p=h("el-tab-pane"),L=h("el-tabs"),x=h("el-radio-button"),G=h("el-radio-group"),g=h("el-checkbox"),F=h("el-checkbox-group"),_=h("el-date-picker"),R=h("el-option"),D=h("el-select"),Y=h("el-button"),P=h("el-table-column"),M=h("el-table"),V=h("el-pagination"),E=j("loading");return c(),N("div",Q,[i(m,{title:"\u5DE5\u5355\u7CFB\u7EDF\u5206\u6790"}),d("div",Z,[i(L,{modelValue:s.activeName,"onUpdate:modelValue":a[0]||(a[0]=o=>s.activeName=o),onTabClick:n.handleClick},{default:u(()=>[i(p,{label:"\u5B89\u88C5\u5DE5\u5355",name:"\u5B89\u88C5\u5DE5\u5355"}),i(p,{label:"\u7EF4\u4FEE\u5DE5\u5355",name:"\u7EF4\u4FEE\u5DE5\u5355"})]),_:1},8,["modelValue","onTabClick"]),d("div",$,[d("div",ee,[i(G,{modelValue:s.checkPeriod,"onUpdate:modelValue":a[1]||(a[1]=o=>s.checkPeriod=o),style:{"margin-right":"20px"},onChange:n.handleCheckedPeriodChange},{default:u(()=>[i(x,{disabled:s.tabDisable,label:"\u6309\u65E5\u7EDF\u8BA1"},null,8,["disabled"]),i(x,{disabled:s.tabDisable,label:"\u6309\u5468\u7EDF\u8BA1"},null,8,["disabled"]),i(x,{disabled:s.tabDisable,label:"\u6309\u6708\u7EDF\u8BA1"},null,8,["disabled"])]),_:1},8,["modelValue","onChange"]),i(F,{modelValue:s.checkGroup,"onUpdate:modelValue":a[2]||(a[2]=o=>s.checkGroup=o),onChange:n.handleCheckedGroupChange},{default:u(()=>[i(g,{label:"\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9"}),i(g,{label:"\u7F51\u683C"}),s.activeName=="\u5B89\u88C5\u5DE5\u5355"?(c(),b(g,{key:0,label:"\u5B89\u88C5\u7C7B\u578B"})):(c(),b(g,{key:1,label:"\u7EF4\u4FEE\u7C7B\u578B"})),s.activeName=="\u7EF4\u4FEE\u5DE5\u5355"?(c(),b(g,{key:2,label:"\u6545\u969C\u79CD\u7C7B"})):T("",!0),i(g,{label:"\u65BD\u5DE5\u5458"})]),_:1},8,["modelValue","onChange"])]),d("div",te,[d("div",ae,[d("div",se,[s.checkPeriod=="\u6309\u65E5\u7EDF\u8BA1"?(c(),b(_,{key:0,modelValue:s.date,"onUpdate:modelValue":a[3]||(a[3]=o=>s.date=o),type:"daterange",format:"YYYY-MM-DD","value-format":"YYYY/MM/DD","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",style:{width:"250px"},onChange:n.changeTime},null,8,["modelValue","onChange"])):s.checkPeriod=="\u6309\u5468\u7EDF\u8BA1"?(c(),N("div",le,[i(_,{modelValue:s.week1forShow,"onUpdate:modelValue":a[4]||(a[4]=o=>s.week1forShow=o),type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u5F00\u59CB\u5468",style:{width:"160px"}},null,8,["modelValue"]),v(" \u81F3 "),i(_,{modelValue:s.week2forShow,"onUpdate:modelValue":a[5]||(a[5]=o=>s.week2forShow=o),type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u7ED3\u675F\u5468",style:{width:"160px"},onChange:n.changeWeekTime},null,8,["modelValue","onChange"])])):s.checkPeriod=="\u6309\u6708\u7EDF\u8BA1"?(c(),b(_,{key:2,modelValue:s.month,"onUpdate:modelValue":a[6]||(a[6]=o=>s.month=o),type:"monthrange",format:"YYYY/MM","value-format":"YYYY/MM","start-placeholder":"\u5F00\u59CB\u6708\u4EFD","end-placeholder":"\u7ED3\u675F\u6708\u4EFD",style:{width:"250px"},onChange:n.changeTime},null,8,["modelValue","onChange"])):T("",!0)]),d("div",null,[i(D,{modelValue:s.station,"onUpdate:modelValue":a[7]||(a[7]=o=>s.station=o),placeholder:"\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9",clearable:"",onChange:a[8]||(a[8]=o=>n.getTableList(s.activeName,s.checkPeriod))},{default:u(()=>[(c(!0),N(w,null,k(s.stationOptions,o=>(c(),b(R,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),d("div",null,[i(D,{modelValue:s.businessName,"onUpdate:modelValue":a[9]||(a[9]=o=>s.businessName=o),placeholder:s.activeName=="\u5B89\u88C5\u5DE5\u5355"?"\u5B89\u88C5\u7C7B\u578B":"\u7EF4\u4FEE\u7C7B\u578B",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",filterable:"",clearable:"",onChange:a[10]||(a[10]=o=>n.getTableList(s.activeName,s.checkPeriod))},{default:u(()=>[(c(!0),N(w,null,k(s.typeList,o=>(c(),b(R,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),d("div",null,[i(D,{modelValue:s.executeStaffName,"onUpdate:modelValue":a[11]||(a[11]=o=>s.executeStaffName=o),placeholder:s.activeName=="\u5B89\u88C5\u5DE5\u5355"?"\u5B89\u88C5\u5458":"\u7EF4\u4FEE\u5458",filterable:"",clearable:"",onChange:a[12]||(a[12]=o=>n.getTableList(s.activeName,s.checkPeriod))},{default:u(()=>[(c(!0),N(w,null,k(s.staffList,o=>(c(),b(R,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])]),d("div",oe,[i(Y,{type:"primary",onClick:n.onExport,loading:s.downLoading},{default:u(()=>[v(" \u5BFC\u51FA\u6570\u636E ")]),_:1},8,["onClick","loading"])])]),d("div",re,[A((c(),b(M,{ref:"table",height:"100%",stripe:"",border:"",data:s.tableData,"header-cell-style":{background:"#eaf2fe",color:"#383838",fontSize:"16px",height:"34px"},"row-style":{height:"24px",fontSize:"14px"},onSortChange:n.sortTable},{empty:u(()=>[ie]),default:u(()=>[(c(!0),N(w,null,k(s.tableHeader,(o,H)=>(c(),b(P,{label:o.label,prop:H,align:"center","min-width":o.width?o.width+"":"100",sortable:o.sort?"custom":!1},{default:u(z=>[d("span",null,B(z.row[H]),1)]),_:2},1032,["label","prop","min-width","sortable"]))),256))]),_:1},8,["data","onSortChange"])),[[E,s.loading]])]),d("div",ne,[i(V,{"current-page":s.currentPage,"page-size":s.pageSize,"page-sizes":[20,30,50,100,1e3],total:s.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])])])}var fe=I(J,[["render",ce],["__scopeId","data-v-cc9e3de6"]]);export{fe as default};
