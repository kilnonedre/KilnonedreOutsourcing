import{C as A}from"./CommonHeader.a228caf3.js";import{b as _,a as R}from"./api.22883e35.js";import{_ as E,C as i,r as c,k as G,o as h,c as L,d as a,b as d,w as p,i as b,l as f,m as W,F as y,h as x,f as B,t as U,p as j,q as I}from"./index.22501be6.js";import{t as q}from"./table2excel.fee53b5f.js";const J="dw1,gridName,custType,payType,offerNameP,offerNameT,acessDuration,monthFee,countSub,monthLost,month",S={\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9:"dw1",\u7F51\u683C:"gridName",\u5BA2\u6237\u7C7B\u578B:"custType",\u652F\u4ED8\u7C7B\u578B:"payType",\u4EA7\u54C1\u540D\u79F0:"offerNameP",\u5957\u9910\u540D\u79F0:"offerNameT",\u5BA2\u6237\u5165\u7F51\u65F6\u95F4:"acessDuration",\u6708\u6D88\u8D39\u989D\u5EA6:"monthFee",\u7EC8\u7AEF\u4E2A\u6570:"countSub"},v=["monthLost","month"],T={\u6D41\u5931\u6708\u4EFD:"monthLost",\u6570\u636E\u6708\u4EFD:"month"},r={dw1:{label:"\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9",width:"180",sort:!0},gridName:{label:"\u7F51\u683C\u540D\u79F0",width:"180",sort:!0},custType:{label:"\u5BA2\u6237\u7C7B\u578B",width:"120",sort:!0},payType:{label:"\u652F\u4ED8\u7C7B\u578B",width:"120",sort:!0},offerNameP:{label:"\u4EA7\u54C1\u540D\u79F0",width:"300",sort:!0},offerNameT:{label:"\u5957\u9910\u540D\u79F0",width:"300",sort:!0},acessDuration:{label:"\u5165\u7F51\u65F6\u957F",width:"120",sort:!0},monthFee:{label:"\u6708\u6D88\u8D39\u989D\u5EA6",width:"150",sort:!0},countSub:{label:"\u7EC8\u7AEF\u4E2A\u6570",width:"120",sort:!0},custAll:{label:"\u5BA2\u6237\u6570",width:"120",sort:!0},subAll:{label:"\u7EC8\u7AEF\u6570",width:"200",sort:!0},custLost:{label:"\u6570\u5B57\u7535\u89C6\u6D41\u5931\u5BA2\u6237\u6570",width:"200",sort:!0},custLostRate:{label:"\u6570\u5B57\u7535\u89C6\u5BA2\u6237\u6D41\u5931\u7387",width:"200",sort:!1},custSubLost:{label:"\u5149\u7EA4\u5BBD\u5E26\u6D41\u5931\u5BA2\u6237\u6570",width:"200",sort:!0},custSubLostRate:{label:"\u5149\u7EA4\u5BBD\u5E26\u5BA2\u6237\u6D41\u5931\u7387",width:"200",sort:!1},subLost:{label:"\u5149\u7EA4\u5BBD\u5E26\u6D41\u5931\u7EC8\u7AEF\u6570",width:"200",sort:!0},subLostRate:{label:"\u5149\u7EA4\u5BBD\u5E26\u7EC8\u7AEF\u6D41\u5931\u7387",width:"200",sort:!1},month:{label:"\u6570\u636E\u6708\u4EFD",width:"120",sort:!0},monthLost:{label:"\u6D41\u5931\u6708\u4EFD",width:"120",sort:!0},clickSum:{label:"\u5E73\u5747\u70B9\u51FB\u6570",width:"120",sort:!0},clickAvgDay:{label:"\u65E5\u5747\u70B9\u51FB\u6570",width:"200",sort:!0},openDays:{label:"\u6708\u5E73\u5747\u5F00\u673A\u5929\u6570",width:"200",sort:!0},openWeekendDays:{label:"\u5468\u516D\u65E5\u5F00\u673A\u5929\u6570",width:"150",sort:!0},openWorkDays:{label:"\u5DE5\u4F5C\u65E5\u5F00\u673A\u5929\u6570",width:"150",sort:!0},nbrCount:{label:"\u5DE5\u5355\u603B\u6570",width:"150",sort:!0},completeNbrCount:{label:"\u5B8C\u6210\u5DE5\u5355\u6570",width:"150",sort:!0},overtimeNbrCount:{label:"\u8D85\u65F6\u5DE5\u5355\u6570",width:"150",sort:!0},overtimeNbrUncomple:{label:"\u8D85\u65F6\u672A\u5B8C\u6210\u5DE5\u5355\u6570",width:"200",sort:!0},rank2Cust:{label:"\u4E8C\u6B21\u62A5\u4FEE\u5BA2\u6237\u6570",width:"200",sort:!0},rank3Cust:{label:"\u4E09\u6B21\u53CA\u4EE5\u4E0A\u62A5\u4FEE\u5BA2\u6237\u6570",width:"220",sort:!0},compleTimeSum:{label:"\u5B8C\u6210\u65F6\u957F(\u5206\u949F)",width:"180",sort:!0},booktimeUnuse:{label:"\u9884\u7EA6\u65F6\u95F4\u5927\u4E8E\u5B8C\u6210\u65F6\u95F4",width:"250",sort:!0},recallSuccess:{label:"\u56DE\u8BBF\u6210\u529F\u6570",width:"150",sort:!0},recallGood:{label:"\u56DE\u8BBF\u6EE1\u610F\u6570",width:"150",sort:!0},recallOrdinary:{label:"\u56DE\u8BBF\u4E00\u822C\u6570",width:"150",sort:!0},recallBad:{label:"\u56DE\u8BBF\u4E0D\u6EE1\u610F\u6570",width:"150",sort:!0}},K={components:{CommonHeader:A},data(){return{activeName:"\u57FA\u7840",tabDisable:!1,loading:!0,downLoading:!1,checkGroup:[],group:"",checkGroup1:[],group1:"",offerNameP:"",offerNamePList:[],offerNameT:"",offerNameTList:[],caller1:!1,monthLost:"",month:"",total:0,pageSize:100,currentPage:1,tableHeader:{},tableData:[],ascs:"",descs:""}},methods:{getTableList(s){this.loading=!0,this.tabDisable=!0,this.tableHeader={},this.tableData=[],s=="\u57FA\u7840"?(_.getLostBasic({size:this.pageSize,current:this.currentPage,offerNameP:this.offerNameP,offerNameT:this.offerNameT,groupBy:this.group,descs:this.descs,ascs:this.ascs}).then(t=>{t.records.length!=0&&Object.keys(t.records[0]).forEach(e=>{this.group.indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),J.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),delete this.tableHeader.custCode,delete this.tableHeader.isHitvLost,delete this.tableHeader.isHitvSubLost,delete this.tableHeader.isSdtvLost,delete this.tableHeader.subscriberInsId,this.tableHeader.custLostRate=r.custLostRate,this.tableHeader.custSubLostRate=r.custSubLostRate,this.tableHeader.subLostRate=r.subLostRate,this.tableData=t.records,this.tableData.forEach(e=>{e.custAll==0?(e.custLostRate="/",e.custSubLostRate="/"):(e.custLostRate=(e.custLost/e.custAll).toFixed(2),e.custSubLostRate=(e.custSubLost/e.custAll).toFixed(2)),e.subAll==0?e.subLostRate="/":e.subLostRate=(e.subLost/e.subAll).toFixed(2)}),this.total=t.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}),this.caller1||R.getParamList({params:"yhxw_lost_basic_mingxi-OFFER_NAME_P,yhxw_lost_basic_mingxi-OFFER_NAME_T"}).then(t=>{this.offerNamePList=t["yhxw_lost_basic_mingxi-OFFER_NAME_P"],this.offerNameTList=t["yhxw_lost_basic_mingxi-OFFER_NAME_T"],this.caller1=!0})):s=="\u5149\u7EA4\u70B9\u51FB"?_.getLostHitvClick({size:this.pageSize,current:this.currentPage,month1:i(this.month)?this.month[0]:"",month2:i(this.month)?this.month[1]:"",lostMonth1:i(this.monthLost)?this.monthLost[0]:"",lostMonth1:i(this.monthLost)?this.monthLost[1]:"",groupBy:this.group1,descs:this.descs,ascs:this.ascs}).then(t=>{t.records.length!=0&&Object.keys(t.records[0]).forEach(e=>{this.group1.split(",").indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),v.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableData=t.records,this.tableData.forEach(e=>{e.clickSum!=null&&(e.clickSum=e.clickSum.toFixed(2)),e.clickAvgDay!=null&&(e.clickAvgDay=e.clickAvgDay.toFixed(2)),e.openDays!=null&&(e.openDays=e.openDays.toFixed(2)),e.openWeekendDays!=null&&(e.openWeekendDays=e.openWeekendDays.toFixed(2)),e.openWorkDays!=null&&(e.openWorkDays=e.openWorkDays.toFixed(2))}),this.total=t.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):s=="\u5149\u7EA4\u7EF4\u4FEE"?_.getLostHitvWeixiu({size:this.pageSize,current:this.currentPage,month1:i(this.month)?this.month[0]:"",month2:i(this.month)?this.month[1]:"",lostMonth1:i(this.monthLost)?this.monthLost[0]:"",lostMonth1:i(this.monthLost)?this.monthLost[1]:"",groupBy:this.group1,descs:this.descs,ascs:this.ascs}).then(t=>{t.records.length!=0&&Object.keys(t.records[0]).forEach(e=>{this.group1.split(",").indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),v.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableData=t.records,this.total=t.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):s=="\u6570\u5B57\u70B9\u51FB"?_.getLostSdtvClick({size:this.pageSize,current:this.currentPage,month1:i(this.month)?this.month[0]:"",month2:i(this.month)?this.month[1]:"",lostMonth1:i(this.monthLost)?this.monthLost[0]:"",lostMonth1:i(this.monthLost)?this.monthLost[1]:"",groupBy:this.group1,descs:this.descs,ascs:this.ascs}).then(t=>{t.records.length!=0&&Object.keys(t.records[0]).forEach(e=>{this.group1.split(",").indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),v.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableData=t.records,this.tableData.forEach(e=>{e.clickSum!=null&&(e.clickSum=e.clickSum.toFixed(2)),e.clickAvgDay!=null&&(e.clickAvgDay=e.clickAvgDay.toFixed(2)),e.openDays!=null&&(e.openDays=e.openDays.toFixed(2)),e.openWeekendDays!=null&&(e.openWeekendDays=e.openWeekendDays.toFixed(2)),e.openWorkDays!=null&&(e.openWorkDays=e.openWorkDays.toFixed(2))}),this.total=t.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})}):s=="\u6570\u5B57\u7EF4\u4FEE"&&_.getLostSdtvWeixiu({size:this.pageSize,current:this.currentPage,month1:i(this.month)?this.month[0]:"",month2:i(this.month)?this.month[1]:"",lostMonth1:i(this.monthLost)?this.monthLost[0]:"",lostMonth1:i(this.monthLost)?this.monthLost[1]:"",groupBy:this.group1,descs:this.descs,ascs:this.ascs}).then(t=>{t.records.length!=0&&Object.keys(t.records[0]).forEach(e=>{this.group1.split(",").indexOf(e)!=-1&&(this.tableHeader[e]=r[e]),v.indexOf(e)==-1&&(this.tableHeader[e]=r[e])}),this.tableData=t.records,this.total=t.total}).finally(()=>{this.tabDisable=!1,this.loading=!1,this.$nextTick(()=>{this.$refs.table.doLayout()})})},handleClick(s){this.activeName=s.props.name,this.checkGroup=["\u6708\u4EFD"],this.group="month",this.ascs="",this.descs="",this.getTableList(this.activeName)},handleCheckedGroupChange(s){this.group="";for(let t=0;t<s.length;t++)t==s.length-1?this.group+=S[s[t]]:this.group+=S[s[t]]+",";this.getTableList(this.activeName)},handleCheckedGroup1Change(s){this.group1="";for(let t=0;t<s.length;t++)t==s.length-1?this.group1+=T[s[t]]:this.group1+=T[s[t]]+",";this.getTableList(this.activeName)},changeTime(){this.getTableList(this.activeName)},getMonth(){let s=new Date,t=s.getMonth();t=t-1,t>11?(s.setFullYear(s.getFullYear()+1),s.setMonth(0)):t<0?(s.setFullYear(s.getFullYear()-1),s.setMonth(11)):s.setMonth(t);let e=s.getFullYear(),g=(s.getMonth()+1).toString();return g.length<=1&&(g="0"+g),e+"/"+g},handleSizeChange(s){this.pageSize=s,this.currentPage=1,this.getTableList(this.activeName)},handleCurrentChange(s){this.currentPage=s,this.getTableList(this.activeName)},sortTable({prop:s,order:t}){t=="ascending"?(this.ascs=s,this.descs=""):t=="descending"?(this.ascs="",this.descs=s):(this.ascs="",this.descs=""),this.getTableList(this.activeName,this.checkPeriod)},onExport(){let s=this.date?this.date:"\u5168\u90E8\u65E5\u671F",t=this.tableData;this.downLoading=!0;let e=[],g;for(let n in this.tableHeader)g={title:this.tableHeader[n].label,key:n,type:"text"},e.push(g);const l=`${s}-${this.activeName}`;q(e,t,l),this.downLoading=!1}},created(){this.getTableList(this.activeName)}},Q=s=>(j("data-v-78cac42a"),s=s(),I(),s),X={class:"page order"},Z={class:"content"},$={class:"tab-content"},ee={class:"group"},te={class:"toolbox"},se={class:"left"},le={class:"right"},oe={class:"table"},ae=Q(()=>d("div",{style:{"margin-top":"5%"}},"\u6682\u65E0\u6570\u636E",-1)),ie={class:"pagination"};function ne(s,t,e,g,l,n){const F=c("common-header"),m=c("el-tab-pane"),H=c("el-tabs"),u=c("el-checkbox"),w=c("el-checkbox-group"),D=c("el-option"),k=c("el-select"),N=c("el-date-picker"),M=c("el-button"),P=c("el-table-column"),V=c("el-table"),z=c("el-pagination"),O=G("loading");return h(),L("div",X,[a(F,{title:"\u6D41\u5931\u7528\u6237\u5206\u6790"}),d("div",Z,[a(H,{modelValue:l.activeName,"onUpdate:modelValue":t[0]||(t[0]=o=>l.activeName=o),onTabClick:n.handleClick},{default:p(()=>[a(m,{disabled:l.tabDisable,label:"\u6D41\u5931\u7528\u6237\u57FA\u7840\u4FE1\u606F\u5206\u6790",name:"\u57FA\u7840"},null,8,["disabled"]),a(m,{disabled:l.tabDisable,label:"\u5149\u7EA4\u5BBD\u5E26\u6D41\u5931\u7528\u6237\u70B9\u51FB\u5206\u6790",name:"\u5149\u7EA4\u70B9\u51FB"},null,8,["disabled"]),a(m,{disabled:l.tabDisable,label:"\u5149\u7EA4\u5BBD\u5E26\u6D41\u5931\u7528\u6237\u7EF4\u4FEE\u5DE5\u5355\u5206\u6790",name:"\u5149\u7EA4\u7EF4\u4FEE"},null,8,["disabled"]),a(m,{disabled:l.tabDisable,label:"\u6570\u5B57\u7535\u89C6\u6D41\u5931\u7528\u6237\u70B9\u51FB\u5206\u6790",name:"\u6570\u5B57\u70B9\u51FB"},null,8,["disabled"]),a(m,{disabled:l.tabDisable,label:"\u6570\u5B57\u7535\u89C6\u6D41\u5931\u7528\u6237\u7EF4\u4FEE\u5DE5\u5355\u5206\u6790",name:"\u6570\u5B57\u7EF4\u4FEE"},null,8,["disabled"])]),_:1},8,["modelValue","onTabClick"]),d("div",$,[d("div",ee,[l.activeName=="\u57FA\u7840"?(h(),b(w,{key:0,modelValue:l.checkGroup,"onUpdate:modelValue":t[1]||(t[1]=o=>l.checkGroup=o),onChange:n.handleCheckedGroupChange},{default:p(()=>[a(u,{label:"\u4E2D\u5FC3\u53CA\u5E7F\u7535\u7AD9"}),a(u,{label:"\u7F51\u683C"}),a(u,{label:"\u5BA2\u6237\u7C7B\u578B"}),a(u,{label:"\u652F\u4ED8\u7C7B\u578B"}),a(u,{label:"\u4EA7\u54C1\u540D\u79F0"}),a(u,{label:"\u5957\u9910\u540D\u79F0"}),a(u,{label:"\u5BA2\u6237\u5165\u7F51\u65F6\u95F4"}),a(u,{label:"\u6708\u6D88\u8D39\u989D\u5EA6"}),a(u,{label:"\u7EC8\u7AEF\u4E2A\u6570"})]),_:1},8,["modelValue","onChange"])):f("",!0),l.activeName!="\u57FA\u7840"?(h(),b(w,{key:1,modelValue:l.checkGroup1,"onUpdate:modelValue":t[2]||(t[2]=o=>l.checkGroup1=o),onChange:n.handleCheckedGroup1Change},{default:p(()=>[a(u,{label:"\u6D41\u5931\u6708\u4EFD"}),a(u,{label:"\u6570\u636E\u6708\u4EFD"})]),_:1},8,["modelValue","onChange"])):f("",!0)]),d("div",te,[d("div",se,[d("div",null,[l.activeName=="\u57FA\u7840"?(h(),b(k,{key:0,modelValue:l.offerNameP,"onUpdate:modelValue":t[3]||(t[3]=o=>l.offerNameP=o),placeholder:"\u4EA7\u54C1\u540D\u79F0",clearable:"",onChange:t[4]||(t[4]=o=>n.getTableList(l.activeName))},{default:p(()=>[(h(!0),L(y,null,x(l.offerNamePList,o=>(h(),b(D,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):f("",!0)]),d("div",null,[l.activeName=="\u57FA\u7840"?(h(),b(k,{key:0,modelValue:l.offerNameT,"onUpdate:modelValue":t[5]||(t[5]=o=>l.offerNameT=o),placeholder:"\u5957\u9910\u540D\u79F0",clearable:"",onChange:t[6]||(t[6]=o=>n.getTableList(l.activeName))},{default:p(()=>[(h(!0),L(y,null,x(l.offerNameTList,o=>(h(),b(D,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):f("",!0)]),l.activeName!="\u57FA\u7840"?(h(),b(N,{key:0,modelValue:l.monthLost,"onUpdate:modelValue":t[7]||(t[7]=o=>l.monthLost=o),type:"monthrange",format:"YYYY/MM","value-format":"YYYY/MM","start-placeholder":"\u5F00\u59CB\u6D41\u5931\u6708\u4EFD","end-placeholder":"\u7ED3\u675F\u6D41\u5931\u6708\u4EFD",style:{width:"250px","margin-right":"10px"},onChange:n.changeTime},null,8,["modelValue","onChange"])):f("",!0),l.activeName!="\u57FA\u7840"?(h(),b(N,{key:1,modelValue:l.month,"onUpdate:modelValue":t[8]||(t[8]=o=>l.month=o),type:"monthrange",format:"YYYY/MM","value-format":"YYYY/MM","start-placeholder":"\u5F00\u59CB\u6570\u636E\u6708\u4EFD","end-placeholder":"\u7ED3\u675F\u6570\u636E\u6708\u4EFD",style:{width:"250px","margin-right":"10px"},onChange:n.changeTime},null,8,["modelValue","onChange"])):f("",!0)]),d("div",le,[a(M,{type:"primary",onClick:n.onExport,loading:l.downLoading},{default:p(()=>[B("\u5BFC\u51FA\u6570\u636E")]),_:1},8,["onClick","loading"])])]),d("div",oe,[W((h(),b(V,{ref:"table",height:"100%",stripe:"",border:"",data:l.tableData,"header-cell-style":{background:"#eaf2fe",color:"#383838",fontSize:"16px",height:"34px"},"row-style":{height:"24px",fontSize:"14px"},onSortChange:n.sortTable},{empty:p(()=>[ae]),default:p(()=>[(h(!0),L(y,null,x(l.tableHeader,(o,C)=>(h(),b(P,{label:o.label,prop:C,align:"center","min-width":o.width?o.width+"":"100",sortable:o.sort?"custom":!1,fit:!0},{default:p(Y=>[d("span",null,U(Y.row[C]),1)]),_:2},1032,["label","prop","min-width","sortable"]))),256))]),_:1},8,["data","onSortChange"])),[[O,l.loading]])]),d("div",ie,[a(z,{"current-page":l.currentPage,"page-size":l.pageSize,"page-sizes":[20,30,50,100,1e3],total:l.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])])])}var ue=E(K,[["render",ne],["__scopeId","data-v-78cac42a"]]);export{ue as default};
