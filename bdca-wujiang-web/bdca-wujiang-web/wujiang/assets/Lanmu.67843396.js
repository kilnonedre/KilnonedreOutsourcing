import{C as D}from"./CommonHeader.a228caf3.js";import{m as C}from"./api.22883e35.js";import{_ as x,r as u,k as U,o as d,c,d as s,b as h,w as n,m as P,i as V,f as b,F as B,h as M,t as N}from"./index.22501be6.js";const E={firstColumnName:{label:"\u4E00\u7EA7\u680F\u76EE",width:"120"},secondColumnName:{label:"\u4E8C\u7EA7\u680F\u76EE",width:"150"},thirdColumnName:{label:"\u4E09\u7EA7\u680F\u76EE",width:"150"},programmeName:{label:"\u8282\u76EE\u540D\u79F0",width:"150"},putStartTime:{label:"\u6295\u653E\u5F00\u59CB\u65F6\u95F4",width:"150"},putEndTime:{label:"\u6295\u653E\u7ED3\u675F\u65F6\u95F4",width:"150"},pictureSize:{label:"\u5C3A\u5BF8",width:"100"},picturePath:{label:"\u56FE\u7247\u7F29\u7565",width:"120"}},q={components:{CommonHeader:D},data(){return{programmeName:"",lanmu:"",lanmuList:[],firstColumnName:"",secondColumnName:"",thirdColumnName:"",dialogVisible:!1,dialogTitle:"",lanmuForm:{id:"",firstColumnName:"",secondColumnName:"",thirdColumnName:"",pictureSize:""},lanmuRules:{firstColumnName:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E00\u7EA7\u680F\u76EE\u540D\u79F0",trigger:"blur"}],secondColumnName:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E8C\u7EA7\u680F\u76EE\u540D\u79F0",trigger:"blur"}],thirdColumnName:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E09\u7EA7\u680F\u76EE\u540D\u79F0",trigger:"blur"}],pictureSize:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u7247\u5C3A\u5BF8",trigger:"blur"}]},loading:!1,tableHeader:E,tableData:[],baseUrl:window.config.baseUrl,srcList:[],ascs:"",descs:"",pageSize:100,currentPage:1,total:1}},methods:{async initList(){await C.getColumnSelector().then(l=>{this.lanmuList=l})},getTableList(){this.loading=!0,this.tableData=[],this.srcList=[],C.getColumnManage({programmeName:this.programmeName,firstColumnName:this.firstColumnName,secondColumnName:this.secondColumnName,thirdColumnName:this.thirdColumnName,size:this.pageSize,current:this.currentPage,descs:this.descs,ascs:this.ascs}).then(l=>{this.tableData=l.records,this.total=l.total,l.records.forEach(t=>{this.srcList.push(this.baseUrl+t.picturePath)})}).finally(()=>{this.loading=!1,this.$nextTick(()=>{this.$refs.lanmu.doLayout()})})},search(){this.currentPage=1,this.getTableList()},changeLanmu(l){this.firstColumnName=l?l[0]:"",this.secondColumnName=l&&l.length>1?l[1]:"",this.thirdColumnName=l&&l.length>2?l[2]:"",this.getTableList()},addLanmu(){this.dialogTitle="\u65B0\u589E\u680F\u76EE",this.dialogVisible=!0},editLanmu(l,t){this.dialogTitle="\u7F16\u8F91\u680F\u76EE",this.dialogVisible=!0,Object.keys(this.lanmuForm).forEach(p=>{this.lanmuForm[p]=t[p]||this.lanmuForm[p]})},delLanmu(l,t){this.$confirm("\u60A8\u786E\u5B9A\u5220\u9664?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{C.delColumnManage(t.id).then(()=>{this.$message.success("\u5220\u9664\u6210\u529F"),this.getTableList()})})},submitFormData(){this.$refs.lanmuForm.validate(l=>{l&&(this.dialogTitle==="\u65B0\u589E\u680F\u76EE"?C.addColumnManage({firstColumnName:this.lanmuForm.firstColumnName,secondColumnName:this.lanmuForm.secondColumnName,thirdColumnName:this.lanmuForm.thirdColumnName,pictureSize:this.lanmuForm.pictureSize}).then(()=>{this.$message.success("\u65B0\u589E\u680F\u76EE\u6210\u529F!"),this.dialogVisible=!1,this.$refs.lanmuForm.resetFields(),this.getTableList()}):this.dialogTitle==="\u7F16\u8F91\u680F\u76EE"&&C.editColumnManage({id:this.lanmuForm.id,firstColumnName:this.lanmuForm.firstColumnName,secondColumnName:this.lanmuForm.secondColumnName,thirdColumnName:this.lanmuForm.thirdColumnName,pictureSize:this.lanmuForm.pictureSize}).then(()=>{this.$message.success("\u7F16\u8F91\u680F\u76EE\u6210\u529F!"),this.dialogVisible=!1,this.$refs.lanmuForm.resetFields(),this.getTableList()}))})},closeDialog(){this.$refs.lanmuForm.resetFields()},handleSizeChange(l){this.pageSize=l,this.currentPage=1,this.getTableList()},handleCurrentChange(l){this.currentPage=l,this.getTableList()},sortTable({prop:l,order:t}){t=="ascending"?(this.ascs=l,this.descs=""):t=="descending"?(this.ascs="",this.descs=l):(this.ascs="",this.descs=""),this.getTableList()},formatDate(l){let t=new Date(l),p=t.getFullYear(),f=t.getMonth()+1,e=t.getDate();f>=1&&f<=9&&(f="0"+f),e>=0&&e<=9&&(e="0"+e);let i=t.getHours(),g=t.getMinutes(),r=t.getSeconds();return i>=1&&i<=9&&(i="0"+i),g>=0&&g<=9&&(g="0"+g),r>=0&&r<=9&&(r="0"+r),p+"-"+f+"-"+e+" "+i+":"+g+":"+r}},created(){this.initList(),this.getTableList()}},H={class:"page order"},j={class:"content"},R={class:"tab-content"},O={class:"toolbox"},Y={class:"left"},A={class:"right"},G={class:"table"},I={key:0,class:"image-wrapper"},J=h("span",null,"\u6682\u65E0\u56FE\u7247",-1),K={key:1},Q={key:2},W={key:3},X={key:4},Z={key:5},$=h("div",{style:{"margin-top":"5%"}},"\u6682\u65E0\u6570\u636E",-1),ee={class:"pagination"},te={class:"dialog-footer"};function le(l,t,p,f,e,i){const g=u("common-header"),r=u("el-input"),L=u("el-cascader"),_=u("el-button"),S=u("el-image"),F=u("el-table-column"),T=u("el-table"),y=u("el-pagination"),w=u("el-form-item"),z=u("el-form"),v=u("el-dialog"),k=U("loading");return d(),c("div",H,[s(g,{title:"\u680F\u76EE\u7BA1\u7406"}),h("div",j,[h("div",R,[h("div",O,[h("div",Y,[s(r,{modelValue:e.programmeName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.programmeName=a),style:{width:"250px","margin-right":"15px"},"prefix-icon":"el-icon-search",placeholder:"\u8BF7\u8F93\u5165\u8282\u76EE\u540D\u79F0",clearable:"",onBlur:i.search,onClear:i.search},null,8,["modelValue","onBlur","onClear"]),s(L,{modelValue:e.lanmu,"onUpdate:modelValue":t[1]||(t[1]=a=>e.lanmu=a),style:{width:"250px"},options:e.lanmuList,onChange:i.changeLanmu,props:{checkStrictly:!0},placeholder:"\u4E00\u7EA7/\u4E8C\u7EA7/\u4E09\u7EA7",clearable:"",filterable:""},null,8,["modelValue","options","onChange"])]),h("div",A,[s(_,{type:"primary",onClick:i.addLanmu},{default:n(()=>[b(" \u65B0\u589E\u680F\u76EE ")]),_:1},8,["onClick"])])]),h("div",G,[P((d(),V(T,{ref:"lanmu",height:"100%",stripe:"",border:"",data:e.tableData,"header-cell-style":{background:"#eaf2fe",color:"#383838",fontSize:"16px",height:"34px"},"row-style":{height:"24px",fontSize:"14px"},onSortChange:i.sortTable},{empty:n(()=>[$]),default:n(()=>[(d(!0),c(B,null,M(e.tableHeader,(a,o)=>(d(),V(F,{label:a.label,prop:o,align:"center","min-width":a.width?a.width+"":"100",sortable:"custom"},{default:n(m=>[o==="picturePath"?(d(),c("div",I,[s(S,{class:"image",src:e.baseUrl+m.row[o],"preview-src-list":e.srcList},{error:n(()=>[J]),_:2},1032,["src","preview-src-list"])])):o==="putStartTime"?(d(),c("span",K,N(m.row[o]?i.formatDate(m.row[o]).split(" ")[0]:"-"),1)):o==="putEndTime"?(d(),c("span",Q,N(m.row[o]?i.formatDate(m.row[o]).split(" ")[0]:"-"),1)):o==="createTime"?(d(),c("span",W,N(m.row[o]?i.formatDate(m.row[o]).split(" ")[0]:"-"),1)):o==="updateTime"?(d(),c("span",X,N(m.row[o]?i.formatDate(m.row[o]).split(" ")[0]:"-"),1)):(d(),c("span",Z,N(m.row[o]?m.row[o]:"-"),1))]),_:2},1032,["label","prop","min-width"]))),256)),s(F,{fixed:"right",label:"\u64CD\u4F5C",align:"center","min-width":"120"},{default:n(a=>[s(_,{size:"small",type:"text",onClick:o=>i.delLanmu(a.$index,a.row)},{default:n(()=>[b("\u5220\u9664")]),_:2},1032,["onClick"]),s(_,{size:"small",type:"text",onClick:o=>i.editLanmu(a.$index,a.row)},{default:n(()=>[b("\u7F16\u8F91")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange"])),[[k,e.loading]])]),h("div",ee,[s(y,{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[20,30,50,100],total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),s(v,{"close-on-click-modal":!1,"close-on-press-escape":!1,modelValue:e.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=a=>e.dialogVisible=a),title:e.dialogTitle,width:"500px",onClosed:i.closeDialog},{footer:n(()=>[h("span",te,[s(_,{onClick:t[6]||(t[6]=a=>e.dialogVisible=!1)},{default:n(()=>[b("\u53D6\u6D88")]),_:1}),s(_,{type:"primary",onClick:i.submitFormData},{default:n(()=>[b("\u786E\u5B9A")]),_:1},8,["onClick"])])]),default:n(()=>[s(z,{ref:"lanmuForm",model:e.lanmuForm,"label-width":"120px","label-position":"left",rules:e.lanmuRules},{default:n(()=>[s(w,{label:"\u4E00\u7EA7\u680F\u76EE\u540D\u79F0",prop:"firstColumnName"},{default:n(()=>[s(r,{placeholder:"\u4E00\u7EA7\u680F\u76EE\u540D\u79F0",modelValue:e.lanmuForm.firstColumnName,"onUpdate:modelValue":t[2]||(t[2]=a=>e.lanmuForm.firstColumnName=a)},null,8,["modelValue"])]),_:1}),s(w,{label:"\u4E8C\u7EA7\u680F\u76EE\u540D\u79F0",prop:"secondColumnName"},{default:n(()=>[s(r,{placeholder:"\u4E8C\u7EA7\u680F\u76EE\u540D\u79F0",modelValue:e.lanmuForm.secondColumnName,"onUpdate:modelValue":t[3]||(t[3]=a=>e.lanmuForm.secondColumnName=a)},null,8,["modelValue"])]),_:1}),s(w,{label:"\u4E09\u7EA7\u680F\u76EE\u540D\u79F0",prop:"thirdColumnName"},{default:n(()=>[s(r,{placeholder:"\u4E09\u7EA7\u680F\u76EE\u540D\u79F0",modelValue:e.lanmuForm.thirdColumnName,"onUpdate:modelValue":t[4]||(t[4]=a=>e.lanmuForm.thirdColumnName=a)},null,8,["modelValue"])]),_:1}),s(w,{label:"\u5C3A\u5BF8",prop:"pictureSize"},{default:n(()=>[s(r,{placeholder:"\u9ED8\u8BA4\u4E0A\u4F20\u7684\u56FE\u7247\u5C3A\u5BF8\uFF0C\u53EF\u7F16\u8F91",modelValue:e.lanmuForm.pictureSize,"onUpdate:modelValue":t[5]||(t[5]=a=>e.lanmuForm.pictureSize=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","onClosed"])])])])}var oe=x(q,[["render",le]]);export{oe as default};
